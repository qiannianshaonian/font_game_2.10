{
  "code": "import WXTool from \"../tool/WXTool\";\r\nimport SceneMgr from \"./SceneMgr\";\r\nimport AppConfig from \"../../AppConfig\";\r\nimport { Script } from \"laya/components/Script\";\r\nimport { Sprite } from \"laya/display/Sprite\";\r\nimport { Box } from \"laya/ui/Box\";\r\nimport { Laya } from \"Laya\";\r\nimport { WXOpenDataViewer } from \"laya/ui/WXOpenDataViewer\";\r\nexport default class SceneBase extends Script {\r\n    onAwake() {\r\n        SceneMgr.curSceneScript = this;\r\n        this.createWxOpenDataViewer();\r\n        let arr = Object.getOwnPropertyNames(this.owner);\r\n        let self = this;\r\n        arr.forEach(element => {\r\n            if (element.indexOf(\"_\") == -1) {\r\n                return;\r\n            }\r\n            let tempPropertyStr = element.toString();\r\n            let tempPropertyList = tempPropertyStr.split(\"_\");\r\n            switch (tempPropertyList[0]) {\r\n                case \"list\":\r\n                case \"txt\":\r\n                case \"img\":\r\n                case \"btn\":\r\n                case \"mc\":\r\n                    self[tempPropertyStr] = self.owner[tempPropertyStr];\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    addPopUp(sign, content, isCenter = true, isShowAlphaSpr = true, isEnableAlphaClose = false) {\r\n        this._popUpSign = sign;\r\n        this._popUpContent = content;\r\n        if (this._popUpSpr == null) {\r\n            this._popUpSpr = new Sprite();\r\n            Laya.stage.addChild(this._popUpSpr);\r\n        }\r\n        else {\r\n            this._popUpSpr.visible = true;\r\n        }\r\n        let h = AppConfig.getMobileHeight();\r\n        if (isCenter) {\r\n            if (content instanceof Sprite) {\r\n                content.x = (Laya.stage.width - content.width) / 2;\r\n                content.y = (h - content.height) / 2;\r\n            }\r\n            if (content instanceof Box) {\r\n                content.centerX = 0;\r\n                content.centerY = 0;\r\n            }\r\n        }\r\n        if (isShowAlphaSpr) {\r\n            if (this._alphaSpr == null) {\r\n                this._alphaSpr = new Sprite();\r\n                this._alphaSpr.width = Laya.stage.width;\r\n                this._alphaSpr.height = Laya.stage.height;\r\n                this._alphaSpr.graphics.drawRect(0, 0, Laya.stage.width, h, \"#000000\");\r\n                this._alphaSpr.alpha = 0.4;\r\n                this._popUpSpr.addChild(this._alphaSpr);\r\n            }\r\n            if (isEnableAlphaClose) {\r\n                this._alphaSpr.on(Laya.Event.CLICK, this, this.hidePopUp);\r\n            }\r\n        }\r\n        else if (this._alphaSpr) {\r\n            this._alphaSpr.visible = false;\r\n        }\r\n        this._popUpSpr.addChild(this._popUpContent);\r\n    }\r\n    hidePopUp() {\r\n        if (this._popUpSpr) {\r\n            this._popUpSpr.visible = false;\r\n        }\r\n        if (this._popUpContent) {\r\n            if (this._popUpContent == this._dataViewer) {\r\n                this._popUpContent.visible = false;\r\n            }\r\n            else {\r\n                this._popUpContent.destroy();\r\n            }\r\n        }\r\n        this._popUpSign = null;\r\n    }\r\n    addDialog(content, isCenter = true, isShowAlphaSpr = true, isEnableAlphaClose = false) {\r\n        this._dialogContent = content;\r\n        if (this._dialogSpr == null) {\r\n            this._dialogSpr = new Sprite();\r\n            Laya.stage.addChild(this._dialogSpr);\r\n        }\r\n        else {\r\n            this._dialogSpr.visible = true;\r\n        }\r\n        let h = AppConfig.getMobileHeight();\r\n        if (isCenter) {\r\n            content.x = (Laya.stage.width - content.width) / 2;\r\n            content.y = (h - content.height) / 2;\r\n        }\r\n        if (isShowAlphaSpr) {\r\n            if (this._alphaDialogSpr == null) {\r\n                this._alphaDialogSpr = new Sprite();\r\n                this._alphaDialogSpr.width = Laya.stage.width;\r\n                this._alphaDialogSpr.height = h;\r\n                this._alphaDialogSpr.graphics.drawRect(0, 0, Laya.stage.width, h, \"#000000\");\r\n                this._alphaDialogSpr.alpha = 0.4;\r\n                this._alphaDialogSpr.mouseEnabled = true;\r\n                this._alphaDialogSpr.mouseThrough = false;\r\n                this._dialogSpr.addChild(this._alphaDialogSpr);\r\n            }\r\n            if (isEnableAlphaClose) {\r\n                this._alphaDialogSpr.on(Laya.Event.CLICK, this, this.hideDialog);\r\n            }\r\n        }\r\n        else if (this._alphaDialogSpr) {\r\n            this._alphaDialogSpr.visible = false;\r\n        }\r\n        this._dialogSpr.addChild(this._dialogContent);\r\n    }\r\n    hideDialog() {\r\n        if (this._dialogSpr) {\r\n            this._dialogSpr.visible = false;\r\n        }\r\n        if (this._dialogContent) {\r\n            if (this._dialogContent == this._dataViewer) {\r\n                this._dialogContent.visible = false;\r\n                WXTool.showAllBtn();\r\n            }\r\n            else {\r\n                this._dialogContent.destroy();\r\n            }\r\n        }\r\n    }\r\n    createWxOpenDataViewer() {\r\n        if (this._dataViewer == null) {\r\n            this._dataViewer = new WXOpenDataViewer();\r\n            this._dataViewer.width = 610;\r\n            this._dataViewer.height = 757;\r\n            this._dataViewer.visible = false;\r\n        }\r\n    }\r\n    showRank() {\r\n        this._dataViewer.visible = true;\r\n        this._dataViewer.postMsg({ cmd: \"refreshRankList\" });\r\n        this.addDialog(this._dataViewer, true, true, true);\r\n        WXTool.hideAllBtn();\r\n    }\r\n}\r\n",
  "references": [
    "F:/ProjectsWorks/font_game_2.10/src/script/tool/WXTool.ts",
    "F:/ProjectsWorks/font_game_2.10/src/script/scene/SceneMgr.ts",
    "F:/ProjectsWorks/font_game_2.10/src/AppConfig.ts",
    "F:/ProjectsWorks/font_game_2.10/libs/laya/components/Script.ts",
    "F:/ProjectsWorks/font_game_2.10/libs/laya/display/Sprite.ts",
    "F:/ProjectsWorks/font_game_2.10/libs/laya/ui/Box.ts",
    "F:/ProjectsWorks/font_game_2.10/libs/Laya.ts",
    "F:/ProjectsWorks/font_game_2.10/libs/laya/ui/WXOpenDataViewer.ts"
  ]
}

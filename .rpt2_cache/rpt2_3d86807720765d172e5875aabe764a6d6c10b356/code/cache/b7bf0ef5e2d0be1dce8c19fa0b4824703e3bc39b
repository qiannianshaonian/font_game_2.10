{
  "code": "import { UIComponent } from \"../../laya/ui/UIComponent\";\r\nimport { Laya } from \"./../../Laya\";\r\nimport { Matrix } from \"../../laya/maths/Matrix\";\r\nimport { Texture } from \"../../laya/resource/Texture\";\r\nimport { Texture2D } from \"../resource/Texture2D\";\r\nimport { ILaya } from \"../../ILaya\";\r\nimport { ClassUtils } from \"../utils/ClassUtils\";\r\nexport class WXOpenDataViewer extends UIComponent {\r\n    constructor() {\r\n        super();\r\n        this._width = this._height = 200;\r\n        var tex = new Texture();\r\n        tex.bitmap = new Texture2D();\r\n        this.texture = tex;\r\n    }\r\n    onEnable() {\r\n        this.postMsg({ type: \"display\", rate: Laya.stage.frameRate });\r\n        if (window.wx && window.sharedCanvas)\r\n            Laya.timer.frameLoop(1, this, this._onLoop);\r\n    }\r\n    onDisable() {\r\n        this.postMsg({ type: \"undisplay\" });\r\n        Laya.timer.clear(this, this._onLoop);\r\n    }\r\n    _onLoop() {\r\n        let _canvas = window.sharedCanvas;\r\n        this.texture.sourceWidth = _canvas.width;\r\n        this.texture.sourceHeight = _canvas.height;\r\n        this.texture.bitmap.loadImageSource(_canvas);\r\n    }\r\n    set width(value) {\r\n        super.width = value;\r\n        if (window.sharedCanvas)\r\n            window.sharedCanvas.width = value;\r\n        this.callLater(this._postMsg);\r\n    }\r\n    get width() {\r\n        return super.width;\r\n    }\r\n    set height(value) {\r\n        super.height = value;\r\n        if (window.sharedCanvas)\r\n            window.sharedCanvas.height = value;\r\n        this.callLater(this._postMsg);\r\n    }\r\n    get height() {\r\n        return super.height;\r\n    }\r\n    set x(value) {\r\n        super.x = value;\r\n        this.callLater(this._postMsg);\r\n    }\r\n    get x() {\r\n        return super.x;\r\n    }\r\n    set y(value) {\r\n        super.y = value;\r\n        this.callLater(this._postMsg);\r\n    }\r\n    get y() {\r\n        return super.y;\r\n    }\r\n    _postMsg() {\r\n        var mat = new Matrix();\r\n        mat.translate(this.x, this.y);\r\n        var stage = Laya.stage;\r\n        mat.scale(stage._canvasTransform.getScaleX() * this.globalScaleX * stage.transform.getScaleX(), stage._canvasTransform.getScaleY() * this.globalScaleY * stage.transform.getScaleY());\r\n        this.postMsg({ type: \"changeMatrix\", a: mat.a, b: mat.b, c: mat.c, d: mat.d, tx: mat.tx, ty: mat.ty, w: this.width, h: this.height });\r\n    }\r\n    postMsg(msg) {\r\n        if (window.wx && window.wx.getOpenDataContext) {\r\n            var openDataContext = window.wx.getOpenDataContext();\r\n            openDataContext.postMessage(msg);\r\n        }\r\n    }\r\n}\r\nILaya.regClass(WXOpenDataViewer);\r\nClassUtils.regClass(\"laya.ui.WXOpenDataViewer\", WXOpenDataViewer);\r\nClassUtils.regClass(\"Laya.WXOpenDataViewer\", WXOpenDataViewer);\r\n",
  "references": [
    "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/laya/ui/UIComponent.ts",
    "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/Laya.ts",
    "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/laya/display/Stage.ts",
    "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/laya/maths/Matrix.ts",
    "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/laya/resource/Texture.ts",
    "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/laya/resource/Texture2D.ts",
    "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/ILaya.ts",
    "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/laya/utils/ClassUtils.ts"
  ],
  "dts": {
    "name": "/Users/zonst/Documents/font_vivo/font_game_2.10/libs/laya/ui/WXOpenDataViewer.d.ts",
    "writeByteOrderMark": false,
    "text": "import { UIComponent } from \"../../laya/ui/UIComponent\";\r\nexport declare class WXOpenDataViewer extends UIComponent {\r\n    constructor();\r\n    onEnable(): void;\r\n    onDisable(): void;\r\n    private _onLoop;\r\n    width: number;\r\n    height: number;\r\n    x: number;\r\n    y: number;\r\n    private _postMsg;\r\n    postMsg(msg: any): void;\r\n}\r\n"
  }
}

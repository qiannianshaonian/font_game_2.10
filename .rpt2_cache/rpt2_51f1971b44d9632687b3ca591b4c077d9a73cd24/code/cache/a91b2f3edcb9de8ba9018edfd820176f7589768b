{
  "code": "import ControllerBase from \"./ControllerBase\";\r\nimport TipItem from \"../prefeb/TipItem\";\r\nimport { Sprite } from \"laya/display/Sprite\";\r\nimport { Laya } from \"Laya\";\r\nimport { Prefab } from \"laya/components/Prefab\";\r\nimport { Tween } from \"laya/utils/Tween\";\r\nimport { Label } from \"laya/ui/Label\";\r\nimport { Pool } from \"laya/utils/Pool\";\r\nimport { Browser } from \"laya/utils/Browser\";\r\nexport default class TipController extends ControllerBase {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._labels = [];\r\n        this._startY = 960;\r\n        this._tipItems = [];\r\n        this._tipItemStartY = 550;\r\n    }\r\n    get tipSpr() {\r\n        return this._tipSpr;\r\n    }\r\n    init() {\r\n        this._tipSpr = new Sprite();\r\n        this._tipSpr.name = \"TipSpr\";\r\n        Laya.stage.addChild(this._tipSpr);\r\n        Laya.loader.load(\"prefab/TipItem.json\", Laya.Handler.create(this, this.onLoadTipItemComplete));\r\n    }\r\n    onLoadTipItemComplete() {\r\n        this._tipItemPrefab = new Prefab();\r\n        this._tipItemPrefab.json = Laya.loader.getRes(\"prefab/TipItem.json\");\r\n    }\r\n    showLeftBottomTip(text) {\r\n        let label = new Label();\r\n        label.color = \"#204800\";\r\n        label.text = text;\r\n        label.font = \"SimHei\";\r\n        label.fontSize = 30;\r\n        label.anchorY = 1;\r\n        label.y = this._startY;\r\n        this._tipSpr.addChild(label);\r\n        this._labels.push(label);\r\n        this.sortLabels();\r\n        Laya.timer.once(1000, this, function () {\r\n            Tween.to(label, { alpha: 0 }, 300);\r\n        });\r\n        Laya.timer.once(1300, this, function () {\r\n            this._labels.splice(this._labels.indexOf(label), 1);\r\n            Laya.timer.clearAll(label);\r\n            label.destroy(true);\r\n        });\r\n    }\r\n    showCenterBottomTip(text) {\r\n        let sysInfo = Browser.window.wx.getSystemInfoSync();\r\n        let width = sysInfo.screenWidth;\r\n        let height = sysInfo.screenHeight;\r\n        let label = new Label();\r\n        label.color = \"#204800\";\r\n        label.text = text;\r\n        label.font = \"SimHei\";\r\n        label.fontSize = 35;\r\n        label.anchorY = 1;\r\n        label.y = height / 2 + 150;\r\n        label.x = width / 2 - 80;\r\n        this._tipSpr.addChild(label);\r\n        this._labels.push(label);\r\n        this.sortLabels();\r\n        Laya.timer.once(1000, this, function () {\r\n            Tween.to(label, { alpha: 0 }, 300);\r\n        });\r\n        Laya.timer.once(2300, this, function () {\r\n            this._labels.splice(this._labels.indexOf(label), 1);\r\n            Laya.timer.clearAll(label);\r\n            label.destroy(true);\r\n        });\r\n    }\r\n    sortLabels() {\r\n        for (let i; i < this._labels.length; i++) {\r\n            let label = this._labels[i];\r\n            let targetY = this._startY - 40 * i;\r\n            Tween.to(label, { y: targetY }, 100);\r\n        }\r\n    }\r\n    showTip(txt) {\r\n        if (this._tipItemPrefab != null) {\r\n            let tipItemSpr = Pool.getItemByCreateFun(\"TipItem\", this._tipItemPrefab.create, this._tipItemPrefab);\r\n            let tipItemScript = tipItemSpr.getComponent(TipItem);\r\n            tipItemScript.text = txt;\r\n            this._tipSpr.addChild(tipItemSpr);\r\n            tipItemSpr.x = (Laya.stage.width - tipItemSpr.width) / 2;\r\n            tipItemSpr.y = this._tipItemStartY - 60;\r\n            this._tipItems.push(tipItemSpr);\r\n            this.sortTipItems();\r\n            Laya.timer.once(1000, this, function () {\r\n                Tween.to(tipItemSpr, { alpha: 0 }, 300);\r\n            });\r\n            Laya.timer.once(1300, this, function () {\r\n                this._tipItems.splice(this._tipItems.indexOf(tipItemSpr), 1);\r\n                Laya.timer.clearAll(tipItemSpr);\r\n                tipItemSpr.destroy(true);\r\n            });\r\n        }\r\n    }\r\n    sortTipItems() {\r\n        for (let i = 0; i < this._tipItems.length; i++) {\r\n            let label = this._tipItems[i];\r\n            let targetY = this._tipItemStartY - 60 * (this._tipItems.length - i);\r\n            Tween.to(label, { y: targetY }, 100);\r\n        }\r\n    }\r\n}\r\nwindow[\"TipController\"] = TipController;\r\n",
  "references": [
    "/Users/zonst/Documents/font2.0/font_game_2.10/src/script/controller/ControllerBase.ts",
    "/Users/zonst/Documents/font2.0/font_game_2.10/src/script/prefeb/TipItem.ts",
    "/Users/zonst/Documents/font2.0/font_game_2.10/libs/laya/display/Sprite.ts",
    "/Users/zonst/Documents/font2.0/font_game_2.10/libs/Laya.ts",
    "/Users/zonst/Documents/font2.0/font_game_2.10/libs/laya/components/Prefab.ts",
    "/Users/zonst/Documents/font2.0/font_game_2.10/libs/laya/utils/Tween.ts",
    "/Users/zonst/Documents/font2.0/font_game_2.10/libs/laya/ui/Label.ts",
    "/Users/zonst/Documents/font2.0/font_game_2.10/libs/laya/utils/Pool.ts",
    "/Users/zonst/Documents/font2.0/font_game_2.10/libs/laya/utils/Browser.ts"
  ]
}

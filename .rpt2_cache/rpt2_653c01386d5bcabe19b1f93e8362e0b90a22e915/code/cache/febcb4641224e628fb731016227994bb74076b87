{
  "code": "import PrefebBase from \"./PrefebBase\";\r\nimport AppConfig from \"../../AppConfig\";\r\nimport ControllerMgr from \"../controller/ControllerMgr\";\r\nimport TipController from \"../controller/TipController\";\r\nimport WXTool from \"../tool/WXTool\";\r\nimport PlayerController from \"../controller/PlayerController\";\r\nimport { Laya } from \"Laya\";\r\nimport { Event } from \"laya/events/Event\";\r\nimport { Browser } from \"laya/utils/Browser\";\r\nexport default class StartGame extends PrefebBase {\r\n    constructor() { super(); }\r\n    onAwake() {\r\n        super.onAwake();\r\n        this.owner[\"height\"] = Laya.stage.height;\r\n        if (AppConfig.platform == \"wx\") {\r\n            let scaleX = window[\"Laya\"][\"MiniAdpter\"].window.screen.availWidth / 640;\r\n            let h = AppConfig.getMobileHeight();\r\n            let scaleY = window[\"Laya\"][\"MiniAdpter\"].window.screen.availHeight * (h / Laya.stage.height) / h;\r\n            let button = Browser.window.wx[\"createUserInfoButton\"]({\r\n                type: 'image',\r\n                image: 'btn_startGame.png',\r\n                style: {\r\n                    left: this.btn_startGame.x * scaleX,\r\n                    top: this.btn_startGame.y * scaleY,\r\n                    width: this.btn_startGame.width * scaleX,\r\n                    height: this.btn_startGame.height * scaleY,\r\n                    lineHeight: 40,\r\n                    color: '#ffffff',\r\n                    textAlign: 'center',\r\n                    fontSize: 16,\r\n                    borderRadius: 4\r\n                }\r\n            });\r\n            button.onTap((res) => {\r\n                console.log(res);\r\n                ControllerMgr.getInstance(PlayerController).myPlayerInfo.name = res.userInfo.nickName;\r\n                this.handler.run();\r\n                button.destroy();\r\n            });\r\n            this.btn_startGame.destroy();\r\n            this.btn_startGame = button;\r\n            WXTool.addBtn(this.btn_startGame);\r\n        }\r\n        else {\r\n            this.btn_startGame.on(Event.CLICK, this, function () {\r\n                this.handler.run();\r\n            });\r\n        }\r\n        this.btn_showRank.on(Event.CLICK, this, function () {\r\n            if (AppConfig.platform == \"wx\") {\r\n                this.onShowRank.run();\r\n            }\r\n            else {\r\n                ControllerMgr.getInstance(TipController).showTip(\"尽情期待\");\r\n            }\r\n        });\r\n        this.btn_share.on(Event.CLICK, this, function () {\r\n            if (AppConfig.platform == \"wx\") {\r\n                Browser.window.wx[\"shareAppMessage\"]({\r\n                    title: '发现有个有趣的游戏',\r\n                    imageUrl: \"https://mmocgame.qpic.cn/wechatgame/iaUVuxArE9L9G28F6XrxKAIEtJOs9x1Ycm2MYmC2Uz5T9O4RLq0ejvG3ic2KlUBiaVf/0\",\r\n                    imageUrlId: \"NelenHPLRXK1-AWENn0aZw\"\r\n                });\r\n            }\r\n            else {\r\n                ControllerMgr.getInstance(TipController).showTip(\"尽情期待\");\r\n            }\r\n        });\r\n    }\r\n    onEnable() {\r\n    }\r\n    onDisable() {\r\n        if (AppConfig.platform == \"wx\") {\r\n            WXTool.removeBtn(this.btn_startGame);\r\n            this.btn_startGame.destroy(true);\r\n        }\r\n        else {\r\n            this.btn_startGame.offAll();\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "F:/ProjectsWorks/font_game_2ceshi/src/script/prefeb/PrefebBase.ts",
    "F:/ProjectsWorks/font_game_2ceshi/src/AppConfig.ts",
    "F:/ProjectsWorks/font_game_2ceshi/src/script/controller/ControllerMgr.ts",
    "F:/ProjectsWorks/font_game_2ceshi/src/script/controller/TipController.ts",
    "F:/ProjectsWorks/font_game_2ceshi/src/script/tool/WXTool.ts",
    "F:/ProjectsWorks/font_game_2ceshi/src/GameConfig.ts",
    "F:/ProjectsWorks/font_game_2ceshi/src/script/controller/PlayerController.ts",
    "F:/ProjectsWorks/font_game_2ceshi/libs/laya/utils/Handler.ts",
    "F:/ProjectsWorks/font_game_2ceshi/libs/laya/ui/Button.ts",
    "F:/ProjectsWorks/font_game_2ceshi/libs/laya/ui/WXOpenDataViewer.ts",
    "F:/ProjectsWorks/font_game_2ceshi/libs/Laya.ts",
    "F:/ProjectsWorks/font_game_2ceshi/libs/laya/events/Event.ts",
    "F:/ProjectsWorks/font_game_2ceshi/libs/laya/utils/Browser.ts"
  ]
}

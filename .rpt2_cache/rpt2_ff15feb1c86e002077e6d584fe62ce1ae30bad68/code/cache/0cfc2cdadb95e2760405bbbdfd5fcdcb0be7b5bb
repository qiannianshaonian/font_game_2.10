{
  "code": "import { Utils } from \"./Utils\";\r\nimport { ILaya } from \"../../ILaya\";\r\nexport class WeakObject {\r\n    constructor() {\r\n        this._obj = {};\r\n        WeakObject._maps.push(this);\r\n    }\r\n    static __init__() {\r\n        WeakObject.I = new WeakObject();\r\n        if (!WeakObject.supportWeakMap)\r\n            ILaya.systemTimer.loop(WeakObject.delInterval, null, WeakObject.clearCache);\r\n    }\r\n    static clearCache() {\r\n        for (var i = 0, n = WeakObject._maps.length; i < n; i++) {\r\n            var obj = WeakObject._maps[i];\r\n            obj._obj = {};\r\n        }\r\n    }\r\n    set(key, value) {\r\n        if (key == null)\r\n            return;\r\n        if (WeakObject.supportWeakMap) {\r\n        }\r\n        else {\r\n            if (typeof (key) == 'string' || typeof (key) == 'number') {\r\n                this._obj[key] = value;\r\n            }\r\n            else {\r\n                key.$_GID || (key.$_GID = Utils.getGID());\r\n                this._obj[key.$_GID] = value;\r\n            }\r\n        }\r\n    }\r\n    get(key) {\r\n        if (key == null)\r\n            return null;\r\n        if (WeakObject.supportWeakMap) {\r\n        }\r\n        else {\r\n            if (typeof (key) == 'string' || typeof (key) == 'number')\r\n                return this._obj[key];\r\n            return this._obj[key.$_GID];\r\n        }\r\n    }\r\n    del(key) {\r\n        if (key == null)\r\n            return;\r\n        if (WeakObject.supportWeakMap) {\r\n        }\r\n        else {\r\n            if (typeof (key) == 'string' || typeof (key) == 'number')\r\n                delete this._obj[key];\r\n            else\r\n                delete this._obj[this._obj.$_GID];\r\n        }\r\n    }\r\n    has(key) {\r\n        if (key == null)\r\n            return false;\r\n        if (WeakObject.supportWeakMap) {\r\n        }\r\n        else {\r\n            if (typeof (key) == 'string' || typeof (key) == 'number')\r\n                return this._obj[key] != null;\r\n            return this._obj[this._obj.$_GID] != null;\r\n        }\r\n    }\r\n}\r\nWeakObject.supportWeakMap = false;\r\nWeakObject.delInterval = 10 * 60 * 1000;\r\nWeakObject._maps = [];\r\n",
  "references": [
    "F:/ProjectsWorks/font_game_2ceshi/libs/laya/utils/Utils.ts",
    "F:/ProjectsWorks/font_game_2ceshi/libs/ILaya.ts"
  ],
  "dts": {
    "name": "F:/ProjectsWorks/font_game_2ceshi/.rpt2_cache/placeholder/laya/utils/WeakObject.d.ts",
    "writeByteOrderMark": false,
    "text": "export declare class WeakObject {\r\n    static supportWeakMap: boolean;\r\n    static delInterval: number;\r\n    static I: WeakObject;\r\n    private static _maps;\r\n    _obj: any;\r\n    static __init__(): void;\r\n    static clearCache(): void;\r\n    constructor();\r\n    set(key: any, value: any): void;\r\n    get(key: any): any;\r\n    del(key: any): void;\r\n    has(key: any): boolean;\r\n}\r\n"
  }
}

{
  "code": "import { ILaya } from \"./../../ILaya\";\r\nexport class CacheManger {\r\n    constructor() {\r\n    }\r\n    static regCacheByFunction(disposeFunction, getCacheListFunction) {\r\n        CacheManger.unRegCacheByFunction(disposeFunction, getCacheListFunction);\r\n        var cache;\r\n        cache = { tryDispose: disposeFunction, getCacheList: getCacheListFunction };\r\n        CacheManger._cacheList.push(cache);\r\n    }\r\n    static unRegCacheByFunction(disposeFunction, getCacheListFunction) {\r\n        var i, len;\r\n        len = CacheManger._cacheList.length;\r\n        for (i = 0; i < len; i++) {\r\n            if (CacheManger._cacheList[i].tryDispose == disposeFunction && CacheManger._cacheList[i].getCacheList == getCacheListFunction) {\r\n                CacheManger._cacheList.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    static forceDispose() {\r\n        var i, len = CacheManger._cacheList.length;\r\n        for (i = 0; i < len; i++) {\r\n            CacheManger._cacheList[i].tryDispose(true);\r\n        }\r\n    }\r\n    static beginCheck(waitTime = 15000) {\r\n        ILaya.systemTimer.loop(waitTime, null, CacheManger._checkLoop);\r\n    }\r\n    static stopCheck() {\r\n        ILaya.systemTimer.clear(null, CacheManger._checkLoop);\r\n    }\r\n    static _checkLoop() {\r\n        var cacheList = CacheManger._cacheList;\r\n        if (cacheList.length < 1)\r\n            return;\r\n        var tTime = ILaya.Browser.now();\r\n        var count;\r\n        var len;\r\n        len = count = cacheList.length;\r\n        while (count > 0) {\r\n            CacheManger._index++;\r\n            CacheManger._index = CacheManger._index % len;\r\n            cacheList[CacheManger._index].tryDispose(false);\r\n            if (ILaya.Browser.now() - tTime > CacheManger.loopTimeLimit)\r\n                break;\r\n            count--;\r\n        }\r\n    }\r\n}\r\nCacheManger.loopTimeLimit = 2;\r\nCacheManger._cacheList = [];\r\nCacheManger._index = 0;\r\n",
  "references": [
    "F:/ProjectsWorks/font_game_2ceshi/libs/ILaya.ts"
  ],
  "dts": {
    "name": "F:/ProjectsWorks/font_game_2ceshi/.rpt2_cache/placeholder/laya/utils/CacheManger.d.ts",
    "writeByteOrderMark": false,
    "text": "export declare class CacheManger {\r\n    static loopTimeLimit: number;\r\n    private static _cacheList;\r\n    private static _index;\r\n    constructor();\r\n    static regCacheByFunction(disposeFunction: Function, getCacheListFunction: Function): void;\r\n    static unRegCacheByFunction(disposeFunction: Function, getCacheListFunction: Function): void;\r\n    static forceDispose(): void;\r\n    static beginCheck(waitTime?: number): void;\r\n    static stopCheck(): void;\r\n    private static _checkLoop;\r\n}\r\n"
  }
}

"use strict";var _interopRequireWildcard=require("@babel/runtime-corejs2/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime-corejs2/helpers/interopRequireDefault"),_Object$defineProperty=require("@babel/runtime-corejs2/core-js/object/define-property");_Object$defineProperty(exports,"__esModule",{value:!0}),exports.default=writeMD5;var _stringify=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/json/stringify")),_entries=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/object/entries")),_md=_interopRequireDefault(require("md5")),_path=_interopRequireDefault(require("path")),paths=_interopRequireWildcard(require("./paths")),_manifest=require("./manifest"),_readdir=_interopRequireDefault(require("./readdir")),_cliSharedUtils=require("@vivo-minigame/cli-shared-utils");/**
 * 获取插件包的md5值以及覆盖配置里面的md5值
 * @param {Array(String)} pluginPath 插件目录名称
 */function writeMD5(a){// 遍历出pluginPath目录所有文件
const b=(0,_readdir.default)(_path.default.resolve(_cliSharedUtils.projectPath,a)),c={};let d=!1;b.sort(),b.forEach(b=>{const e=_path.default.extname(b);0>[".js",".json"].indexOf(e)&&(d=!0),"plugin.json"!==b&&(c[b]=(0,_md.default)(_cliSharedUtils.fs.readFileSync(_path.default.resolve(_cliSharedUtils.projectPath,a,b))))}),d&&(0,_cliSharedUtils.warn)("\u63D2\u4EF6\u5305\u76EE\u524D\u652F\u6301js\u6587\u4EF6\uFF0C\u6682\u65F6\u4E0D\u652F\u6301\u653E\u7F6E\u5176\u4ED6\u7C7B\u578B\u6587\u4EF6\uFF0C\u5EFA\u8BAE\u4F18\u5316\u4E0B\u91CD\u65B0\u6253\u5305");const e=(0,_entries.default)(c);let f="";e.forEach(a=>{f+=a[0],f+=a[1]});// warn('插件包文件列表以及MD5值')
// warn(md5Arr)
// warn('插件包文件列表以及MD5值相加字符串')
// warn(md5Str)
// 读取manifest配置
const g=(0,_manifest.get)();g.plugins[a].provider=(0,_md.default)(f),_cliSharedUtils.fs.writeFileSync(paths.MANIFEST,(0,_stringify.default)(g,null,2))}
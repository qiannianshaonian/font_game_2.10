"use strict";var _interopRequireDefault=require("@babel/runtime-corejs2/helpers/interopRequireDefault"),_Object$defineProperty=require("@babel/runtime-corejs2/core-js/object/define-property");_Object$defineProperty(exports,"__esModule",{value:!0}),exports.createSocketServer=createSocketServer;var _socket=_interopRequireDefault(require("socket.io")),_logger=require("./logger");/**
 * Copyright (C) 2017, hapjs.org. All rights reserved.
 */function createSocketServer(a,b){const c=(0,_socket.default)(a);// 暂时绑定io
b.context.io=c,c.on("connection",a=>{c.on("error",a=>{_logger.logger.error(`### App Socket Server ### websocket server发生错误: ${a.message}`)}),a.on("disconnect",()=>{_logger.logger.info(`### App Socket Server ### websocket client与websocket server断开`),c.emit("user disconnected")})})}
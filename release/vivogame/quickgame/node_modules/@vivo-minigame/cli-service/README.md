# `@vivo-minigame/cli-service`

> 为 vivo 小游戏工程 提供 build/release/watch/server等服务 

使用 [@vivo-minigame/cli](https://www.npmjs.com/package/@vivo-minigame/cli) 初始化出小游戏工程后，打开package.json，可以看到如下内容：


```json
{
  "name": "qgame",
  "version": "1.0.0",
  "description": "",
  "scripts": {
    "server": "mg-service server",
    "build": "mg-service build",
    "release": "mg-service release",
    "watch": "mg-service watch"
  },
  "devDependencies": {
    "@babel/core": "^7.4.5",
    "@babel/plugin-transform-runtime": "^7.4.4",
    "@babel/preset-env": "^7.4.5",
    "babel-loader": "^8.0.6",
    "babel-eslint": "^8.2.1",
    "@vivo-minigame/cli-service": "0.1.0-alpha.26"
  },
  "dependencies": {
    "@babel/runtime-corejs2": "^7.5.5"
  }
}

```

其中 `@vivo-minigame/cli-service` 通过 mg-service 提供服务，参考上面 `scripts` 的内容 

## 使用

```
npm run build      // 构建rpk
```

```
npm run watch      // 修改源代码文件后，都自动编译项目并构建rpk
```

```
npm run server      // 启动HTTP服务器
```

```
npm run release      // 构建发布版本的rpk包
```

## 参数

### `--no-inject`

在 build/watch/release 中生效，当配置此参数时表示在构建时，打原整包时默认不注入分包的依赖。由开发者自行决定何时`require` 分包模块

> 只在分包时需要配置此参数，请参考分包加载的文档

## 示例


```json
{
  "name": "qgame",
  "version": "1.0.0",
  "description": "",
  "scripts": {
    "server": "mg-service server",
    "build": "mg-service build --no-inject",
    "release": "mg-service release --no-inject",
    "watch": "mg-service watch --no-inject"
  },
  "devDependencies": {
    "@babel/core": "^7.4.5",
    "@babel/plugin-transform-runtime": "^7.4.4",
    "@babel/preset-env": "^7.4.5",
    "babel-loader": "^8.0.6",
    "babel-eslint": "^8.2.1",
    "@vivo-minigame/cli-service": "0.1.0-alpha.26"
  },
  "dependencies": {
    "@babel/runtime-corejs2": "^7.5.5"
  }
}

```


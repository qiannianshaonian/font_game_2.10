"use strict";var _interopRequireDefault=require("@babel/runtime-corejs2/helpers/interopRequireDefault"),_Object$defineProperty=require("@babel/runtime-corejs2/core-js/object/define-property");_Object$defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _events=_interopRequireDefault(require("events")),_cliSharedUtils=require("@vivo-minigame/cli-shared-utils");/**
 * mg-service 的入口
 */class Service extends _events.default{/**
   * 构造函数
   * @param {String} context  服务启动的当前目录
   */constructor(a){super(),this.context=a,this.commands={};["./commands/packager","./commands/server"].map(a=>{try{require(a)(this,{context:this.context})}catch(a){(0,_cliSharedUtils.error)(a)}})}/**
   * 注册到Service上的命令
   * @param {String} cmd 注册的命令
   * @param {Function} fn 命定对应的逻辑
   */registerCommand(a,b){this.commands[a]={fn:b}}/**
   * 服务启动入口
   * @param {String} cmd 启动命令
   * @param {Object} args 命令参数，暂时没有
   */run(a,b={}){b._=b._||[];const c=this.commands[a];c||((0,_cliSharedUtils.error)(`command "${a}" does not exist.`),process.exit(1));const{fn:d}=c;return d(b)}}var _default=Service;exports.default=_default;